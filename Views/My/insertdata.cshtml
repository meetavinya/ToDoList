@model Totask

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Task</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0px; 
        }

        .hide {
            opacity: 0;
            transition: opacity 1s ease-out;
        }

    </style>
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

</head>
<body class="bg-light">


    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">
        <div class="container">
            <a class="navbar-brand" href="#">ToDoList</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="#">Create Task</a></li>
                    <li class="nav-item"><a class="nav-link" asp-controller="My" asp-action="Display">Display</a></li>
                    @if (ViewBag.IsLogginedIn != null)
                    {
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-white" href="#" id="userDropdown" role="button">
                                Welcome, @ViewBag.IsLogginedIn
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="userDropdown">
                                <li>
                                    <a class="dropdown-item" asp-action="" asp-controller="">Profile</a>
                                    <a class="dropdown-item" asp-controller="My" asp-action="Logout">Logout</a>
                                    <span class="dropdown-divider"></span>
                                    <a class="dropdown-item" asp-action="" asp-controller="">Delete Account</a>
                                </li>
                            </ul>
                        </li>
                    }
                    else
                    {    
                    <li class="nav-item"><a class="nav-link" asp-controller="My" asp-action="login">Login</a></li>
                    <li class="nav-item"><a class="nav-link" asp-controller="My" asp-action="register">Register</a></li>
                    }
                </ul>
            </div>
        </div>
    </nav>


    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow border-0">
                    <div class="card-header bg-white">
                        <h4 class="mb-0">Create New Task</h4>
                    </div>
                    <div class="card-body">
                        <form method="post" asp-action="InsertData" asp-controller="My">
                           
                            <input type="hidden" asp-for="Id"  readonly/>

                            <div class="mb-3">
                                <label asp-for="Title" class="form-label">Task Title</label>
                                <input asp-for="Title" id="Title" class="form-control" />
                                <span asp-validation-for="Title" id="title_err" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Description" class="form-label">Description</label>
                                <textarea asp-for="Description" id="Description" class="form-control" rows="3" placeholder="max:200 words"></textarea>
                                <span asp-validation-for="Description" id="description_err" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="DueDate" class="form-label">Due Date</label>
                                <input asp-for="DueDate" id="DueDate" type="date" class="form-control" min="@DateTime.Now.ToString("yyyy-MM-dd")" />
                                <span asp-validation-for="DueDate" id="dueDate_err" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Priority" class="form-label">Priority</label>
                                <select asp-for="Priority" id="Priority" class="form-select">
                                    <option value="">-- Select Priority --</option>
                                    <option value="Low">Low</option>
                                    <option value="Medium">Medium</option>
                                    <option value="High">High</option>
                                </select>
                                <span asp-validation-for="Priority" id="priority_err" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Status" class="form-label">Status</label>
                                <select asp-for="Status" id="Status" class="form-select">
                                    <option value="">-- Select Status --</option>
                                    <option value="Pending">Pending</option>
                                    <option value="In-Progress">In-Progress</option>
                                    @if (Model != null && Model.Id > 0)
                                    {
                                        <option value="Completed">Completed</option>
                                    }
                                </select>
                                <span asp-validation-for="Status" id="status_err" class="text-danger"></span>
                            </div>

                            <div class="d-grid">
                                @if (Model != null && Model.Id > 0)
                                {
                                    <button type="submit" id="btninsert" class="btn btn-success">Update Task</button>
                                }
                                else
                                {
                                    <button type="submit" id="btninsert" class="btn btn-success">Create Task</button>
                                }
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light mt-5 py-3">
        <div class="container text-center">
            <small>&copy; @DateTime.Now.Year ToDoList App. All rights reserved.</small><br />
            <small>&copy; @DateTime.Now.Year ToDoList App. All rights reserved.</small><br />
            <small>&copy; @DateTime.Now.Year ToDoList App. All rights reserved.</small><br />
            <small>&copy; @DateTime.Now.Year ToDoList App. All rights reserved.</small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="~/js/validation.js"></script>
    @if (TempData["Message"] != null)
    {
        <script>
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: '@TempData["Message"]',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                willClose: () => {
                   
                    window.location.href = '@Url.Action("Display", "My")';
                }
            });
        </script>
    }

   
</body>
</html>
